{"entries":[{"timestamp":1746897640180,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"SCROLL_SHOWSTRING\"><field name=\"dir\">SCROLL_DIR.LEFT</field><field name=\"rotate\">SCROLL_ROTATE.SR_0</field><value name=\"s\"><shadow type=\"text\"><field name=\"TEXT\">TYST!</field></shadow></value><value name=\"delay\"><shadow type=\"math_number\"><field name=\"NUM\">200</field></shadow></value></block></statement></block>"],[1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  "],[0,"<blo"]],"start1":12,"start2":12,"length1":461,"length2":75},{"diffs":[[0,"ver\""],[-1," x=\"205\" y=\"0\""],[0,"></b"]],"start1":107,"start2":107,"length1":22,"length2":8},{"diffs":[[0,"</block>"],[1,"\n"],[0,"</xml>"]],"start1":112,"start2":112,"length1":14,"length2":15}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"ScrolText.showString(\n\"TYST!\",\nSCROLL_DIR.LEFT,\nSCROLL_ROTATE.SR_0,\n200\n)\nbasic.forever(function () {\n\t\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":107,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," \"*\""],[-1,",\n        \"pxt-proportional-font\": \"github:lwchkg/pxt-proportional-font#v1.0.2\",\n        \"ScrollText\": \"github:makecode-extensions/scrolltext#v1.4.0\""],[0,"\n"],[1,""],[0,"    "]],"start1":131,"start2":131,"length1":158,"length2":9},{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"blocksprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":228,"start2":228,"length1":36,"length2":31}]}]},{"timestamp":1746897797452,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"376"],[1,"205"],[0,"\" y=\""],[-1,"29"],[1,"0"],[0,"\"></"]],"start1":497,"start2":497,"length1":18,"length2":17}]}]},{"timestamp":1746939434328,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":392,"start2":392,"length1":17,"length2":21}]}]},{"timestamp":1746939444899,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"/**\n * microbit makecode Package: "],[0,"Scrol"],[-1,"l "],[0,"Text."],[-1,"\n * Author: shao ziyang, 2018.Sept\n * From microbit/micropython Chinese community.\n * http://www.micropython.org.cn\n */\n\n\n//% weight=20 color=#Ffbc11 icon=\"T\" block=\"ScrollText\"\nnamespace ScrollText {\n\n\n    enum SCROLL_DIR {\n        //% block=\"LEFT\"\n        LEFT,\n        //% block=\"UP\"\n        UP,\n        //% block=\"RIGHT\"\n        RIGHT,\n        //% block=\"DOWN\"\n        DOWN\n    }\n\n    enum SCROLL_ROTATE {\n        //% block=\"0\"\n        SR_0,\n        //% block=\"90\"\n        SR_90,\n        //% block=\"180\"\n        SR_180,\n        //% block=\"270\"\n        SR_270\n    }\n\n    const FONTS = hex`00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002020200020A0A0000000A1F0A1F0A0E130E190E13090412190609060916020200000004020202040204040402000A040A0000040E0400000000040200000E0000000000020010080402010609090906040604040E070806010F0F080409060C0A090F081F010F100F08040E110E1F080402010E110E110E0E110E0402000200020000040004020804020408000E000E0002040804020E110C00040E1115190606090F090907090709070E0101010E07090909070F0107010F0F010701010E0119110E09090F090907020202071F080809060905030509010101010F111B151111111315191106090909060709070101060909060C07090709110E010608071F0404040409090909061111110A041111151B110909060909110A0404040F0402010F0E0202020E01020408100E0808080E040A000000000000001F0204000000000E09091E0101070907000E01010E08080E090E060907010E0C020702020E090E08060101070909020002020208000808060105030509020202020C001B151111000709090900060909060007090701000E090E08000E010101000C02040302020E021C000909091E0011110A04001111151B000906060900110A0403000F04020F0C0406040C0202020202030206020300000618000000000000`;\n\n    let img: Image = null\n    img = images.createImage(`\n    . . . . .\n    . . . . .\n    . . . . .\n    . . . . .\n    . . . . .\n    `)\n\n    function _Rotate(c: number, rotate: SCROLL_ROTATE) {\n        let m: number[][] = [\n            [0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0]\n        ]\n        //let r: number[] = [font[0], font[1], font[2], font[3], font[4]]\n        let r: number[] = [FONTS[c * 5], FONTS[c * 5 + 1], FONTS[c * 5 + 2], FONTS[c * 5 + 3], FONTS[c * 5 + 4]]\n        switch (rotate) {\n            case SCROLL_ROTATE.SR_0:\n                return r;\n            case SCROLL_ROTATE.SR_90:\n                for (let i = 0; i < 5; i++) {\n                    m[4 - i][0] = (r[i] & 0x01)\n                    m[4 - i][1] = (r[i] & 0x02)\n                    m[4 - i][2] = (r[i] & 0x04)\n                    m[4 - i][3] = (r[i] & 0x08)\n                    m[4 - i][4] = (r[i] & 0x10)\n                }\n                break;\n            case SCROLL_ROTATE.SR_180:\n                for (let i = 0; i < 5; i++) {\n                    m[4][4 - i] = (r[i] & 0x01)\n                    m[3][4 - i] = (r[i] & 0x02)\n                    m[2][4 - i] = (r[i] & 0x04)\n                    m[1][4 - i] = (r[i] & 0x08)\n                    m[0][4 - i] = (r[i] & 0x10)\n                }\n                break;\n            case SCROLL_ROTATE.SR_270:\n                for (let i = 0; i < 5; i++) {\n                    m[i][4] = (r[i] & 0x01)\n                    m[i][3] = (r[i] & 0x02)\n                    m[i][2] = (r[i] & 0x04)\n                    m[i][1] = (r[i] & 0x08)\n                    m[i][0] = (r[i] & 0x10)\n                }\n                break;\n        }\n        for (let n = 0; n <= 4; n++) {\n            let d = 0\n            if (m[0][n]) d |= 1\n            if (m[1][n]) d |= 2\n            if (m[2][n]) d |= 4\n            if (m[3][n]) d |= 8\n            if (m[4][n]) d |= 16\n            r[n] = d\n        }\n        return r\n    }\n\n    function _ToImg(dat: number[]): void {\n        for (let i = 0; i < 5; i++) {\n            img.setPixel(0, i, (dat[i] & 0x01) == 0x01)\n            img.setPixel(1, i, (dat[i] & 0x02) == 0x02)\n            img.setPixel(2, i, (dat[i] & 0x04) == 0x04)\n            img.setPixel(3, i, (dat[i] & 0x08) == 0x08)\n            img.setPixel(4, i, (dat[i] & 0x10) == 0x10)\n        }\n    }\n\n    /**\n     * show a scroll string\n     * @param s      , eg: \"Hello\"\n     * @param dir    , eg: SCROLL_DIR.LEFT\n     * @param rotate , eg: SCROLL_ROTATE.SR_0\n     * @param delay  , eg: 100\n     */\n    //% blockId=\"SCROLL_SHOWSTRING\" block=\"scroll string %s|dir %dir|rotate %rotate|delay %delay\"\n    //% weight=100 blockGap=8\n    export function showString(s: string, dir: SCROLL_DIR, rotate: SCROLL_ROTATE, delay: number): void {\n        let L = s.length + 1\n        let a: number[] = [0, 0, 0, 0, 0]\n        let b: number[] = [0, 0, 0, 0, 0]\n\n        if (s == '') return\n\n        s = ' ' + s + ' '\n\n        switch (dir) {\n            case SCROLL_DIR.LEFT:\n                for (let i = 0; i < L; i++) {\n                    a = _Rotate(s.charCodeAt(i), rotate)\n                    b = _Rotate(s.charCodeAt(i + 1), rotate)\n                    let c: number[] = [0, 0, 0, 0, 0]\n                    for (let j = 0; j < 5; j++) {\n                        for (let k = 0; k < 5; k++)\n                            c[k] = (a[k] >> j) | ((b[k] << (8 - j)) >> 3)\n                        _ToImg(c)\n                        img.showImage(0, delay)\n                    }\n                }\n                break;\n            case SCROLL_DIR.RIGHT:\n                for (let i = 0; i < L; i++) {\n                    a = _Rotate(s.charCodeAt(i), rotate)\n                    b = _Rotate(s.charCodeAt(i + 1), rotate)\n                    let c: number[] = [0, 0, 0, 0, 0]\n                    for (let j = 0; j < 5; j++) {\n                        for (let k = 0; k < 5; k++)\n                            c[k] = (a[k] << j) | ((b[k] >> (5 - j)))\n                        _ToImg(c)\n                        img.showImage(0, delay)\n                    }\n                }\n                break;\n            case SCROLL_DIR.UP:\n                for (let i = 0; i < L; i++) {\n                    a = _Rotate(s.charCodeAt(i), rotate)\n                    b = _Rotate(s.charCodeAt(i + 1), rotate)\n                    let c: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n                    for (let j = 0; j < 5; j++) {\n                        c[j] = a[j]\n                        c[j + 6] = b[j]\n                    }\n                    for (let j = 0; j < 6; j++) {\n                        _ToImg(c)\n                        img.showImage(0, delay)\n                        c.removeAt(0)\n                    }\n                }\n                break;\n            case SCROLL_DIR.DOWN:\n                for (let i = 0; i < L; i++) {\n                    a = _Rotate(s.charCodeAt(i), rotate)\n                    b = _Rotate(s.charCodeAt(i + 1), rotate)\n                    let c: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n                    for (let j = 0; j < 5; j++) {\n                        c[j] = a[j]\n                        c[j + 6] = b[j]\n                    }\n                    for (let j = 0; j < 6; j++) {\n                        _ToImg(c)\n                        img.showImage(0, delay)\n                        for (let k = 5; k > 0; k--) {\n                            c[k] = c[k - 1]\n                        }\n                        c[0] = c[11 - j]\n                    }\n                }\n                break;\n        }\n    }\n\n    /**\n      * show a scroll number\n      * @param n      , eg: 123\n      * @param dir    , eg: SCROLL_DIR.LEFT\n      * @param rotate , eg: SCROLL_ROTATE.SR_90\n      * @param delay  , eg: 100\n      */\n    //% blockId=\"SCROLL_SHOWNUMBER\" block=\"scroll number %n|dir %dir|rotate %rotate|delay %delay\"\n    //% weight=100 blockGap=8\n    export function showNumber(n: number, dir: SCROLL_DIR, rotate: SCROLL_ROTATE, delay: number): void {\n        showString(n.toString(), dir, rotate, delay)\n    }\n}"],[1,"showString(\n\"TYST!\",\nSCROLL_DIR.LEFT,\nSCROLL_ROTATE.SR_0,\n200\n)\nbasic.forever(function () {\n\t\n})\n"]],"start1":0,"start2":0,"length1":8028,"length2":107}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"  \"main."],[-1,"t"],[1,"block"],[0,"s\",\n    "]],"start1":313,"start2":313,"length1":17,"length2":21},{"diffs":[[0,"   \""],[-1,"README.md\"\n    ],\n    \"testFiles\": ["],[1,"main.ts\","],[0,"\n   "]],"start1":335,"start2":335,"length1":44,"length2":17},{"diffs":[[0,"   \""],[-1,"test.ts"],[1,"README.md"],[0,"\"\n  "]],"start1":354,"start2":354,"length1":15,"length2":17}]},{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[1,"s"],[0,"://"],[-1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  "],[1,"developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"SCROLL_SHOWSTRING\"><field name=\"dir\">SCROLL_DIR.LEFT</field><field name=\"rotate\">SCROLL_ROTATE.SR_0</field><value name=\"s\"><shadow type=\"text\"><field name=\"TEXT\">TYST!</field></shadow></value><value name=\"delay\"><shadow type=\"math_number\"><field name=\"NUM\">200</field></shadow></value></block></statement></block>"],[0,"<blo"]],"start1":12,"start2":12,"length1":75,"length2":461},{"diffs":[[0,"forever\""],[1," x=\"376\" y=\"29\""],[0,"></block"]],"start1":489,"start2":489,"length1":16,"length2":31},{"diffs":[[0,"ock>"],[-1,"\n"],[0,"</xm"]],"start1":517,"start2":517,"length1":9,"length2":8}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1746897640179,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"test\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1746939434328,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"SCROLL_SHOWSTRING\"><field name=\"dir\">SCROLL_DIR.LEFT</field><field name=\"rotate\">SCROLL_ROTATE.SR_0</field><value name=\"s\"><shadow type=\"text\"><field name=\"TEXT\">TYST!</field></shadow></value><value name=\"delay\"><shadow type=\"math_number\"><field name=\"NUM\">200</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"205\" y=\"0\"></block></xml>","main.ts":"","README.md":"","pxt.json":"{\n    \"name\": \"test\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"pxt-proportional-font\": \"github:lwchkg/pxt-proportional-font#v1.0.2\",\n        \"ScrollText\": \"github:makecode-extensions/scrolltext#v1.4.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}}],"shares":[],"lastSaveTime":1746939884464}